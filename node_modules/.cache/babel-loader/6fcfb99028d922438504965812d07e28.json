{"ast":null,"code":"import _classCallCheck from\"/Users/spbiphones/Dropbox/projects/web projects/mood/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/spbiphones/Dropbox/projects/web projects/mood/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/spbiphones/Dropbox/projects/web projects/mood/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/spbiphones/Dropbox/projects/web projects/mood/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/spbiphones/Dropbox/projects/web projects/mood/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/spbiphones/Dropbox/projects/web projects/mood/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{PanelHeader,ModalRoot,ModalPage,View,Panel,ModalPageHeader,Button,PanelHeaderButton,FormLayout,Radio}from'@vkontakte/vkui';import back from\"../../resources/icons/navbar_close.svg\";import{getCategories}from'../../utils/Utils';var MODAL_PAGE_FILTERS='filters';var CategoryPicker=/*#__PURE__*/function(_React$Component){_inherits(CategoryPicker,_React$Component);function CategoryPicker(props){var _this;_classCallCheck(this,CategoryPicker);_this=_possibleConstructorReturn(this,_getPrototypeOf(CategoryPicker).call(this,props));_this.modalBack=function(){_this.setActiveModal(null);_this.props.toogleCategoryPicker();};_this.state={activeModal:null,modalHistory:[],category:{},pickedIndex:0,categories:getCategories()};_this.onCategoryChanged=_this.onCategoryChanged.bind(_assertThisInitialized(_this));_this.onReady=_this.onReady.bind(_assertThisInitialized(_this));return _this;}_createClass(CategoryPicker,[{key:\"componentDidMount\",value:function componentDidMount(){this.setActiveModal(MODAL_PAGE_FILTERS);}},{key:\"setActiveModal\",value:function setActiveModal(activeModal){this.setState({activeModal:activeModal});}},{key:\"onCategoryChanged\",value:function onCategoryChanged(event){if(event){var value=event.target.value;var cat=this.state.categories[parseInt(value)];this.setState({category:cat,pickedIndex:parseInt(value)});console.log(\"value = \"+value);console.log(\"category = \"+cat);}}},{key:\"onReady\",value:function onReady(){this.props.onCategoryPicked(this.state.category);this.modalBack();this.props.toogleCategoryPicker();}},{key:\"render\",value:function render(){var _this2=this;var modal=React.createElement(ModalRoot,{activeModal:this.state.activeModal,onClose:this.modalBack},React.createElement(ModalPage,{header:React.createElement(ModalPageHeader,{left:React.createElement(\"img\",{onClick:this.modalBack,className:\"back_icon\",src:back})},\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0442\\u0435\\u043C\\u0443\"),id:MODAL_PAGE_FILTERS,onClose:this.modalBack},React.createElement(\"div\",{className:\"navbar_line\"}),React.createElement(\"p\",{className:\"moodpicker_description\"},\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0442\\u0435\\u043C\\u0443 \\u0432\\u0430\\u0448\\u0435\\u0439 \\u0437\\u0430\\u043F\\u0438\\u0441\\u0438, \\u0447\\u0442\\u043E\\u0431\\u044B \\u043F\\u043E\\u043F\\u0430\\u0441\\u0442\\u044C \\u043D\\u0430 \\u041A\\u0430\\u0440\\u0442\\u0443 \\u043D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0435\\u043D\\u0438\\u0439.\"),React.createElement(FormLayout,null,React.createElement(\"div\",{onChange:this.onCategoryChanged,value:this.state.pickedIndex},this.state.categories.map(function(item,index){return React.createElement(Radio,{key:index,name:\"radio\",value:index,defaultChecked:_this2.props.categoryPicked==undefined?index==0?true:false:_this2.props.categoryPicked.title==item.title?true:false},item.title)// index == 0 ? <Radio key={index} name=\"radio\" value={index} defaultChecked>{item.title}</Radio> :\n// <Radio key={index} name=\"radio\" value={index}>{item.title}</Radio>\n;}))),React.createElement(\"div\",{onClick:this.onReady,className:\"large_vk_btn hover\"},\"\\u0413\\u043E\\u0442\\u043E\\u0432\\u043E\"),React.createElement(\"div\",{className:\"space_btn\"})));return React.createElement(View,{activePanel:\"modals\",modal:modal},React.createElement(Panel,{id:\"modals\"}));}}]);return CategoryPicker;}(React.Component);export default CategoryPicker;","map":{"version":3,"sources":["/Users/spbiphones/Dropbox/projects/web projects/mood/src/pages/custom_views/CategoryPicker.js"],"names":["React","PanelHeader","ModalRoot","ModalPage","View","Panel","ModalPageHeader","Button","PanelHeaderButton","FormLayout","Radio","getCategories","MODAL_PAGE_FILTERS","CategoryPicker","props","modalBack","setActiveModal","toogleCategoryPicker","state","activeModal","modalHistory","category","pickedIndex","categories","onCategoryChanged","bind","onReady","setState","event","value","target","cat","parseInt","console","log","onCategoryPicked","modal","back","map","item","index","categoryPicked","undefined","title","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { PanelHeader, ModalRoot, ModalPage, View, Panel, ModalPageHeader, Button, PanelHeaderButton, FormLayout, Radio } from '@vkontakte/vkui';\nimport back from '../../resources/icons/navbar_close.svg'\nimport { getCategories } from '../../utils/Utils';\nconst MODAL_PAGE_FILTERS = 'filters';\n\nclass CategoryPicker extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      activeModal: null,\n      modalHistory: [],\n      category : {},\n      pickedIndex : 0,\n      categories : getCategories()\n    };\n\n    this.onCategoryChanged = this.onCategoryChanged.bind(this);\n    this.onReady = this.onReady.bind(this);\n  }\n  modalBack = () => {\n    this.setActiveModal(null);\n    this.props.toogleCategoryPicker()\n  };\n  componentDidMount(){\n    this.setActiveModal(MODAL_PAGE_FILTERS)\n  }\n  setActiveModal(activeModal) {\n    this.setState({activeModal : activeModal})\n  };\n  onCategoryChanged(event){\n    if (event){\n        var value = event.target.value\n        var cat = this.state.categories[parseInt(value)]\n        this.setState({category : cat, pickedIndex : parseInt(value)})\n        console.log(\"value = \" + value)\n        console.log(\"category = \" + cat)\n    }\n  }\n  onReady(){\n    this.props.onCategoryPicked(this.state.category)\n    this.modalBack()\n    this.props.toogleCategoryPicker()\n  }\n  render() {\n    const modal = (\n        <ModalRoot activeModal={this.state.activeModal} onClose={this.modalBack}>\n            <ModalPage  header={\n            <ModalPageHeader  left={<img onClick={this.modalBack} className=\"back_icon\" src={back}/>}>\n              Выберите тему\n            </ModalPageHeader>\n          } id={MODAL_PAGE_FILTERS} onClose={this.modalBack}>\n                <div className=\"navbar_line\"/>\n                <p className=\"moodpicker_description\">Выберите тему вашей записи, чтобы попасть на Карту настроений.</p>\n                <FormLayout>\n                    <div onChange={this.onCategoryChanged} value={this.state.pickedIndex}>\n                        {this.state.categories.map((item, index) => (\n                            \n                            <Radio key={index} name=\"radio\" value={index} defaultChecked={this.props.categoryPicked == undefined ? (index == 0 ? true : false) : (this.props.categoryPicked.title == item.title ? true : false)}>{item.title}</Radio>\n                            // index == 0 ? <Radio key={index} name=\"radio\" value={index} defaultChecked>{item.title}</Radio> :\n                            // <Radio key={index} name=\"radio\" value={index}>{item.title}</Radio>\n                        ))}\n\n                    </div>\n                </FormLayout>\n                <div onClick={this.onReady} className=\"large_vk_btn hover\">Готово</div>\n                <div className=\"space_btn\"/>\n            </ModalPage>\n        </ModalRoot>\n    );\n    return (\n        <View activePanel=\"modals\" modal={modal}>\n          <Panel id=\"modals\">\n            \n          </Panel>\n        </View>\n      );\n  }\n}\n\nexport default CategoryPicker;"]},"metadata":{},"sourceType":"module"}