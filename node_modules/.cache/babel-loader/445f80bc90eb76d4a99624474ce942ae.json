{"ast":null,"code":"import _classCallCheck from\"/Users/spbiphones/Dropbox/projects/web projects/mood/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/spbiphones/Dropbox/projects/web projects/mood/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/spbiphones/Dropbox/projects/web projects/mood/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/spbiphones/Dropbox/projects/web projects/mood/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/spbiphones/Dropbox/projects/web projects/mood/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/spbiphones/Dropbox/projects/web projects/mood/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import'../resources/styles/map.css';import{PanelHeader,HorizontalScroll}from'@vkontakte/vkui';import NavbarBack from'../panels/NavbarBack';import GoogleMapReact from'google-map-react';import Supercluster from'supercluster';import MarkerCircle from'./custom_views/MarkerCircle';import close_dark_24 from\"../resources/icons/close_dark_24.svg\";import empty from\"../resources/icons/empty.svg\";import search from\"../resources/icons/search.svg\";import MapFilterDropDown from'./custom_views/MapFilterDropdown';import BottomSheetDialog from'./custom_views/BottomSheetDialog';import CategoryItem from'./custom_views/CategoryItem';import{getCategories}from'../utils/Utils';var Map=/*#__PURE__*/function(_React$Component){_inherits(Map,_React$Component);function Map(props){var _this;_classCallCheck(this,Map);_this=_possibleConstructorReturn(this,_getPrototypeOf(Map).call(this,props));_this.disableToolbar=function(){if(window.document.getElementsByClassName(\"PanelHeader\")[0]!=undefined){window.document.getElementsByClassName(\"PanelHeader\")[0].style.display='none';}};_this.closeBottomSheet=function(){_this.setState({isShowBottomSheet:false});};_this.state={isShowToolbar:true,isShowBottomSheet:false,filterMood:0,categories:getCategories(),filteredNews:_this.props.news,searchText:\"\",filterCategory:undefined};_this.closeMap=_this.closeMap.bind(_assertThisInitialized(_this));_this.toogleBottomSheet=_this.toogleBottomSheet.bind(_assertThisInitialized(_this));_this.filterMoodPicked=_this.filterMoodPicked.bind(_assertThisInitialized(_this));_this.onSearchChanged=_this.onSearchChanged.bind(_assertThisInitialized(_this));_this.filter=_this.filter.bind(_assertThisInitialized(_this));_this.filterCategoryPicked=_this.filterCategoryPicked.bind(_assertThisInitialized(_this));_this.onMarkerClicked=_this.onMarkerClicked.bind(_assertThisInitialized(_this));return _this;}_createClass(Map,[{key:\"componentDidMount\",value:function componentDidMount(){setTimeout(this.disableToolbar,1000);this.setState({isShowToolbar:false});this.filter(this.state.searchText,this.state.filterMood,this.state.filterCategory);this.props.setMarkerItem({});}},{key:\"filterMoodPicked\",value:function filterMoodPicked(mood){this.setState({filterMood:mood});this.filter(this.state.searchText,mood,this.state.filterCategory);}},{key:\"filterCategoryPicked\",value:function filterCategoryPicked(category){this.setState({filterCategory:category});this.filter(this.state.searchText,this.state.filterMood,category);}},{key:\"toogleBottomSheet\",value:function toogleBottomSheet(){this.setState({isShowBottomSheet:true});}},{key:\"closeMap\",value:function closeMap(){this.setState({isShowToolbar:true});this.props.changePage(\"news\");}},{key:\"onMarkerClicked\",value:function onMarkerClicked(post){var result=this.props.news.filter(function(item){return post.category.title==item.category.title;});this.props.setFilteredNews(result);this.props.onCategoryPicked(post.category.title);this.props.setMarkerItem(post);this.props.changePage(\"news_picked\");}},{key:\"onSearchChanged\",value:function onSearchChanged(event){if(event){var value=event.target.value;this.setState({searchText:value});this.filter(value,this.state.filterMood,this.state.filterCategory);}}},{key:\"filter\",value:function filter(text,filterMood,filterCategory){var result=this.props.news.filter(function(post){var isMood=post.category.mood==filterMood;var isCategory=filterCategory==undefined?true:post.category.title.toLowerCase()==filterCategory.title.toLowerCase();var isSearchText=text==\"\"||text==undefined?true:post.category.title.toLowerCase().includes(text.toLowerCase());return isMood&&isSearchText&&isCategory;});this.setState({filteredNews:result});}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",{className:\"news_content\"},this.state.isShowToolbar&&React.createElement(PanelHeader,null,React.createElement(NavbarBack,{back:\"news\",onBack:this.changePage,title:\"\\u041D\\u043E\\u0432\\u043E\\u0441\\u0442\\u0438\"})),React.createElement(\"div\",{style:{height:'100vh',width:'100%'},className:\"map_container\"},React.createElement(GoogleMapReact,{bootstrapURLKeys:{key:\"AIzaSyDJrwFDlj0KxrgP6W91C08IhDNJ1Zr8ANA\"},defaultCenter:this.props.center,defaultZoom:this.props.zoom},this.state.filteredNews.length>0&&this.state.filteredNews.map(function(item,index){return React.createElement(MarkerCircle,{onMarkerClicked:_this2.onMarkerClicked,lng:item.lon,lat:item.lat,index:index,post:item,key:index});}))),React.createElement(MapFilterDropDown,{filterMood:this.state.filterMood,toogleBottomSheet:this.toogleBottomSheet}),this.state.isShowBottomSheet&&React.createElement(BottomSheetDialog,{filterMoodPicked:this.filterMoodPicked,onClose:this.closeBottomSheet}),React.createElement(\"div\",{onClick:this.closeMap,className:\"close_map_container\"},React.createElement(\"img\",{className:\"close_map_icon\",src:close_dark_24})),React.createElement(\"div\",{className:\"map_search_bottom_container\"},React.createElement(\"div\",{className:\"search_music_container\"},React.createElement(\"img\",{className:\"search_icon_input\",src:search}),React.createElement(\"input\",{className:\"search_input\",placeholder:\"\\u041F\\u043E\\u0438\\u0441\\u043A\",onChange:this.onSearchChanged,value:this.state.searchText})),React.createElement(HorizontalScroll,null,React.createElement(\"div\",{style:{display:'flex',marginLeft:'4px'}},this.state.categories.length>0&&this.state.categories.map(function(item,index){return React.createElement(CategoryItem,{filterCategory:_this2.state.filterCategory,filterCategoryPicked:_this2.filterCategoryPicked,index:index,category:item,key:index});})))),this.state.filteredNews.length==0&&React.createElement(\"div\",{className:\"empty_filters\"},React.createElement(\"div\",{className:\"center_empty_container\"},React.createElement(\"img\",{className:\"horizontal-center relative\",src:empty}),React.createElement(\"p\",{className:\"empty_title\"},\"\\u041D\\u0435\\u0442 \\u0437\\u0430\\u043F\\u0438\\u0441\\u0435\\u0439 \\u0441 \\u0442\\u0430\\u043A\\u0438\\u043C\",React.createElement(\"br\",null),\"\\u043D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0435\\u043D\\u0438\\u0435\\u043C\"),React.createElement(\"p\",{className:\"empty_title font_16\"},\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0434\\u0440\\u0443\\u0433\\u043E\\u0435\"))));}}]);return Map;}(React.Component);Map.defaultProps={center:{lat:59.95,lng:30.33},zoom:12};export default Map;","map":{"version":3,"sources":["/Users/spbiphones/Dropbox/projects/web projects/mood/src/pages/Map.js"],"names":["React","PanelHeader","HorizontalScroll","NavbarBack","GoogleMapReact","Supercluster","MarkerCircle","MapFilterDropDown","BottomSheetDialog","CategoryItem","getCategories","Map","props","disableToolbar","window","document","getElementsByClassName","undefined","style","display","closeBottomSheet","setState","isShowBottomSheet","state","isShowToolbar","filterMood","categories","filteredNews","news","searchText","filterCategory","closeMap","bind","toogleBottomSheet","filterMoodPicked","onSearchChanged","filter","filterCategoryPicked","onMarkerClicked","setTimeout","setMarkerItem","mood","category","changePage","post","result","item","title","setFilteredNews","onCategoryPicked","event","value","target","text","isMood","isCategory","toLowerCase","isSearchText","includes","height","width","key","center","zoom","length","map","index","lon","lat","close_dark_24","search","marginLeft","empty","Component","defaultProps","lng"],"mappings":"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","sourcesContent":["import React from 'react';\nimport '../resources/styles/map.css'\nimport { PanelHeader, HorizontalScroll } from '@vkontakte/vkui';\nimport NavbarBack from '../panels/NavbarBack';\nimport GoogleMapReact from 'google-map-react';\nimport Supercluster from 'supercluster';\nimport MarkerCircle from './custom_views/MarkerCircle';\nimport close_dark_24 from '../resources/icons/close_dark_24.svg'\nimport empty from '../resources/icons/empty.svg'\nimport search from '../resources/icons/search.svg'\nimport MapFilterDropDown from './custom_views/MapFilterDropdown';\nimport BottomSheetDialog from './custom_views/BottomSheetDialog';\nimport CategoryItem from './custom_views/CategoryItem';\nimport { getCategories } from '../utils/Utils';\nclass Map extends React.Component {\n    static defaultProps = {\n        center: {\n          lat: 59.95,\n          lng: 30.33\n        },\n        zoom: 12\n      };\n    constructor(props){\n        super(props)\n        this.state = {\n            isShowToolbar : true,\n            isShowBottomSheet : false,\n            filterMood : 0,\n            categories : getCategories(),\n            filteredNews : this.props.news,\n            searchText : \"\",\n            filterCategory : undefined\n        }\n        this.closeMap = this.closeMap.bind(this);\n        this.toogleBottomSheet = this.toogleBottomSheet.bind(this);\n        this.filterMoodPicked = this.filterMoodPicked.bind(this);\n        this.onSearchChanged = this.onSearchChanged.bind(this);\n        this.filter = this.filter.bind(this);\n        this.filterCategoryPicked = this.filterCategoryPicked.bind(this);\n        this.onMarkerClicked = this.onMarkerClicked.bind(this);\n    }\n    componentDidMount(){\n        setTimeout(this.disableToolbar, 1000)\n        this.setState({isShowToolbar : false})\n        this.filter(this.state.searchText, this.state.filterMood, this.state.filterCategory)\n        this.props.setMarkerItem({})\n    }\n    disableToolbar = () => {\n        if (window.document.getElementsByClassName(\"PanelHeader\")[0] != undefined){\n            window.document.getElementsByClassName(\"PanelHeader\")[0].style.display = 'none'\n        }   \n    }\n    filterMoodPicked(mood){\n        this.setState({filterMood : mood})\n        this.filter(this.state.searchText, mood, this.state.filterCategory)\n    }\n    filterCategoryPicked(category){\n        this.setState({filterCategory : category})\n        this.filter(this.state.searchText, this.state.filterMood, category)\n    }\n    toogleBottomSheet(){\n        this.setState({isShowBottomSheet : true})\n    }\n    closeBottomSheet = () =>{\n        this.setState({isShowBottomSheet : false})\n    }\n    closeMap(){\n        this.setState({isShowToolbar : true})\n        this.props.changePage(\"news\")\n    }\n    onMarkerClicked(post){\n        const result = this.props.news.filter(item => {\n            return (post.category.title == item.category.title)\n        });\n        this.props.setFilteredNews(result)\n        this.props.onCategoryPicked(post.category.title)\n        this.props.setMarkerItem(post)\n        this.props.changePage(\"news_picked\")\n    }\n\n    onSearchChanged(event){\n        if (event){\n            var value = event.target.value\n            this.setState({searchText : value})\n            this.filter(value, this.state.filterMood, this.state.filterCategory)\n        }\n        \n    }\n    filter(text, filterMood, filterCategory){\n        const result = this.props.news.filter(post => {\n            const isMood = post.category.mood == filterMood\n            const isCategory = (filterCategory == undefined ? true : post.category.title.toLowerCase() == filterCategory.title.toLowerCase())\n            const isSearchText = ((text == \"\" || text == undefined) ? true : post.category.title.toLowerCase().includes(text.toLowerCase()))\n            return isMood && isSearchText && isCategory\n        });\n        this.setState({filteredNews : result})\n    }\n    render() {\n\n        return (\n            <div className=\"news_content\">\n                {this.state.isShowToolbar && <PanelHeader>\n                    <NavbarBack back=\"news\" onBack={this.changePage} title=\"Новости\"/>\n                </PanelHeader>}\n                <div style={{ height: '100vh', width: '100%' }} className=\"map_container\">\n                    <GoogleMapReact bootstrapURLKeys={{ key: \"AIzaSyDJrwFDlj0KxrgP6W91C08IhDNJ1Zr8ANA\" }} defaultCenter={this.props.center}\n                           defaultZoom={this.props.zoom}>\n                               {this.state.filteredNews.length > 0 && this.state.filteredNews.map((item, index) => (\n                                    <MarkerCircle onMarkerClicked={this.onMarkerClicked} lng={item.lon} lat={item.lat} index={index} post={item} key={index}/>\n                                ))}\n                           \n\n                    </GoogleMapReact>\n                \n                </div>\n                <MapFilterDropDown filterMood={this.state.filterMood} toogleBottomSheet={this.toogleBottomSheet}/>\n                {this.state.isShowBottomSheet && <BottomSheetDialog filterMoodPicked={this.filterMoodPicked} onClose={this.closeBottomSheet}/>}\n                <div onClick={this.closeMap} className=\"close_map_container\">\n                    <img className=\"close_map_icon\" src={close_dark_24}/>\n                </div>\n                <div className=\"map_search_bottom_container\">\n                    <div className=\"search_music_container\">\n                        <img className=\"search_icon_input\" src={search}/>\n                        <input className=\"search_input\" placeholder=\"Поиск\" onChange={this.onSearchChanged} value={this.state.searchText} />\n                    </div>\n                    <HorizontalScroll>\n                        <div style={{ display: 'flex', marginLeft : '4px'}}>\n                            {this.state.categories.length > 0 && this.state.categories.map((item, index) => (\n                                <CategoryItem filterCategory={this.state.filterCategory} filterCategoryPicked={this.filterCategoryPicked} index={index} category={item} key={index}/>\n                            ))}\n                        </div>\n                    </HorizontalScroll>\n                </div>\n                {this.state.filteredNews.length == 0 && <div className=\"empty_filters\">\n                    <div className=\"center_empty_container\">\n                        <img className=\"horizontal-center relative\" src={empty}/>\n                        <p className=\"empty_title\">Нет записей с таким<br/>настроением</p>\n                        <p className=\"empty_title font_16\">Выберите другое</p>\n                    </div>\n                </div>}\n            </div>\n        );\n    }\n}\nexport default Map;"]},"metadata":{},"sourceType":"module"}